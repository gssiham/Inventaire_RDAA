<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
  <link rel="apple-touch-startup-image" href="images/apple-touch-startup-image-320x460.png" />
  <title>minio - mobile web app template</title>
  <link rel="stylesheet" href="css/framework7.css">
  <link rel="stylesheet" href="style.css">
  <link type="text/css" rel="stylesheet" href="css/swipebox.css" />
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,700,900' rel='stylesheet' type='text/css'>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>
<script type="text/javascript">

  function create_logs() {

    document.getElementById('inv').value = "";
    document.getElementById('exe').value = "";
    document.getElementById('debut').value = "";
    document.getElementById('fin').value = "";

    document.getElementById('eqp').value = "";

    document.getElementById("inventaire").innerHTML = "";
    document.getElementById("exercice").innerHTML = ""
    document.getElementById("date").innerHTML = "";
    document.getElementById("agent").innerHTML = "";



    var db1 = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
    db1.transaction(function (tx) {
      tx.executeSql('CREATE TABLE IF NOT EXISTS LOGSx (id)');


    });


    db.transaction(function (tx) {
      tx.executeSql('SELECT id FROM LOGSx', [], function (tx, results) {
        var len = results.rows.length, i;
        if (len < 1) {

          //tx.executeSql('delete from inventaire2'); 
          tx.executeSql('delete from LOGS');
          tx.executeSql('INSERT INTO LOGSx (id) VALUES (" " )');
        }
        for (i = 0; i < len; i++) {
          //msg = "<p><b>" + results.rows.item(i).log + "</b></p>";

          var res = results.rows.item(i).id.split("||");




          if (res[1]) {


            document.getElementById('inv').value = res[0];
            document.getElementById('exe').value = res[1];
            document.getElementById('debut').value = res[2].split('/').reverse().join('-');
            document.getElementById('fin').value = "" + res[3].split('/').reverse().join('-') + "";

            document.getElementById('eqp').value = res[4];
            document.getElementById("inventaire").innerHTML = "Inventaire <b style='color:#ffca2e'>" + res[0] + "</b>";
            document.getElementById("exercice").innerHTML = "Exercice <b style='color:#ffca2e'>" + res[1];
            document.getElementById("date").innerHTML = "<b style='color:#ffca2e'>" + res[2] + "</b> au <b style='color:#ffca2e'>" + res[3] + "</b>";
            document.getElementById("agent").innerHTML = "Equipe <b style='color:#ffca2e'>" + res[4] + "</b>";
          }
        }
      }, null);
    });
  }

</script>

<body id="mobile_wrap" onload="create_logs();">

  <div class="statusbar-overlay"></div>

  <div class="panel-overlay"></div>

  <div class="panel panel-left panel-cover">
    <nav class="list-nav">
      <ul>
        <li class="home-icon"><a href="index.html" class="close-panel">Home</a></li>
        <li class="about-icon"><a href="about.html" class="close-panel">About</a></li>
        <li class="tools-icon"><a href="#" data-popup=".popup-inventaire" class="open-popup">Inventaire</a></li>
        <li class="download-icon"><a href="#" data-popup=".popup-detailx" class="open-popup">Affectation</a></li>
        <li class="download-icon"><a href="#" onclick="envoie_java();">Export</a></li>

      </ul>
    </nav>
  </div>

  <div class="panel panel-right panel-cover">
    <div class="user_login_info">
      <h2>Hi, username</h2>
      <p>Edit your account settings</p>
      <nav class="list-nav-small">
        <ul>
          <li class="about-icon"><a href="about.html" class="close-panel">Profile</a></li>
          <li class="tools-icon"><a href="features.html" class="close-panel">Settings</a></li>
          <li class="lock-icon"><a href="features.html" class="close-panel">Account</a></li>
          <li class="envelope-icon"><a href="features.html" class="close-panel">Messages</a></li>
          <li class="heart-icon"><a href="features.html" class="close-panel">Favorites</a></li>
          <li class="download-icon"><a href="features.html" class="close-panel">Downloads</a></li>
          <li class="logout-icon"><a href="index.html" class="close-panel">Logout</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <div class="views">

    <div class="view view-main">

      <div class="navbar">
        <div class="navbar-inner">
          <div class="left sliding">
            <div class="logo_title">Mobilis</div>
          </div>
          <div class="right menu_open_icon"><a href="#" onclick="create_fi();" data-panel="left"
              class="link icon-only open-panel"></a></div>
        </div>
      </div>

      <div class="pages navbar-through toolbar-through">

        <div data-page="index" class="page homepage">
          <div class="page-content">

            <!-- Slider -->
            <div class="swiper-container swiper-init" data-effect="coverflow" data-pagination=".swiper-pagination">
              <div class="swiper-wrapper">

                <div class="swiper-slide">


                  <span id="inventaire"> </span>
                  <span class="subtitle" id="exercice"> </span>
                  <span class="subtitle" id="date"> </span>
                  <span class="subtitle" id="agent"> </span>
                  <img src="images/photos/logo.svg" alt="" srcset="">
                  <div style="
    margin-top: 44px;">
                    <a href="#" style="    color: #fff;
    padding: 10px 20px;
    margin: 30px 0 0 0;
    font-size: 14px;
    border: 1px solid #fff;background-color: #5BAC26;border-left-width: 3px !important;
    border-left-color: red !important;" data-popup=".popup-social" class="open-popup">Commencer le Scan</a>
                  </div>
                  <script>


                    var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
                    var msg;


                    db.transaction(function (tx) {
                      tx.executeSql('SELECT * FROM inventaire2', [], function (tx, results) {
                        var len = results.rows.length, i;

                        for (i = 0; i < len; i++) {
                          //msg = "<p><b>" + results.rows.item(i).log + "</b></p>";

                          document.getElementById('inventaire').innerHTML = "Inventaire " + results.rows.item(i).num;
                          document.getElementById('exercice').innerHTML = "Exercice " + results.rows.item(i).num + "";
                          document.getElementById('date').innerHTML = "Du " + results.rows.item(i).dated + " au  " + results.rows.item(i).datef;
                          document.getElementById('agent').innerHTML = "Agent " + results.rows.item(i).agent;



                        }
                      }, null);
                    });





                  </script>
                </div>
                <div class="swiper-slide">
                  <span style="    color: #5BAC26;font-family: arial, helvetica, sans-serif;">Mobilis Inventaire <br />
                  </span>
                </div>

              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>
        </div>
      </div>
      <script>
        function test() {
          location.href = "file:///android_asset/js/stat.html";
        }
      </script>
      <!-- Bottom Toolbar-->

      <div class="toolbar">
        <p style="    margin-top: -50px;
    text-align: center;    font-size: 12px;
color:white;"> </p>
        <div class="toolbar-inner">
          <ul class="toolbar_icons icons_4row">
            <li><a href="#" data-popup=".popup-croise" onclick="checking();" class="open-popup"> <img src="icons8-data-quality-50.png"
                  alt="" title="" /></a></li>
            <!--<li><a href="#" data-popup=".popup-login" class="open-popup"><img src="evaluate.png" alt="" title="" /></a></li>
-->
            <li><a href="#" data-popup=".popup-social2" onclick="affiche_bureau();" class="open-popup"
                id="bureau_liste"><img src="icons8-article-64.png" alt="" title="" width="50px" height="50px" /></a></li>

            <li><a href="#" data-popup=".popup-social" class="open-popup"><img src="icons8-search-50.png" alt="" title="" /></a>
            </li>


          </ul>
        </div>
      </div>


    </div>
  </div>

  <!-- About Popup -->
  <div class="popup popup-login">
    <div class="content-block">
      <h4>Login</h4>
      <div class="loginform">
        <script>
          function ref() {
            var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
            var msg;
            db.transaction(function (tx) {
              tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log,bureau,date_scan)');

            });

            db.transaction(function (tx) {
              tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) {
                var len = results.rows.length, i;
                msg = "<p>Found rows: " + len + "</p>";
                document.querySelector('#myInput').innerHTML = "";
                document.querySelector('#status').innerHTML += msg;
                for (i = 0; i < len; i++) {
                  //msg = "<p><b>" + results.rows.item(i).log + "</b></p>";
                  document.querySelector('#myInput').innerHTML += results.rows.item(i).log + "," + results.rows.item(i).bureau + "\n";


                }
              }, null);
            });
          }
          function ref2() {
            var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
            var msg;
            db.transaction(function (tx) {
              tx.executeSql('CREATE TABLE IF NOT EXISTS affectation2 (inv, code,date)');

            });

            db.transaction(function (tx) {
              tx.executeSql('SELECT * FROM affectation2', [], function (tx, results) {
                var len = results.rows.length, i;
                msg = "<p>Found rows: " + len + "</p>";
                alert(len);
                for (i = 0; i < len; i++) {

                  document.querySelector('#myInput').innerHTML += results.rows.item(i).inv + "," + results.rows.item(i).code + "\n";


                }
              }, null);
            });
          }
          function ref4() {
            var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
            var msg;
            db.transaction(function (tx) {
              tx.executeSql('CREATE TABLE IF NOT EXISTS inventaire2 (inv, code,date)');

            });

            db.transaction(function (tx) {
              tx.executeSql('SELECT * FROM inventaire2', [], function (tx, results) {
                var len = results.rows.length, i;
                msg = "<p>Found rows: " + len + "</p>";
                alert(len);
                for (i = 0; i < len; i++) {

                  document.querySelector('#myInput').innerHTML += results.rows.item(i).agent + "\n";


                }
              }, null);
            });
          }
        </script>
        <textarea id="myInput" name="myInput" rows="4" cols="50" style="display: none;">

</textarea> <button onclick="ref()">ref</button>
        <button onclick="ref2()">ref2</button>
        <button onclick="ref4()">ref4</button>
        <div id="status" name="status">Status Message</div>
        <button onclick="myFunction()">Copy text</button>

        <p>The document.execCommand() method is not supported in IE8 and earlier.</p>

        <script>
          function myFunction() {
            var copyText = document.getElementById("myInput");
            copyText.select();
            copyText.setSelectionRange(0, 99999)
            document.execCommand("copy");
            alert("Copied the text: ");
          }
        </script>
      </div>
      <div class="close_popup_button_gray" style="    position: relative;    margin-top: 100px; margin-left: 34px; "><a
          href="#" class="close-popup">Close</a></div>


    </div>
  </div>
  <!-- Services Popup -->





  <script>


    var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
    var msg;
    db.transaction(function (tx) {
      tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log,bureau,date_scan)');

    });

    db.transaction(function (tx) {
      tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) {
        var len = results.rows.length, i;
        msg = "<p>Found rows: " + len + "</p>";
        document.querySelector('#myInput').innerHTML = "";
        document.querySelector('#status').innerHTML += msg;
        for (i = 0; i < len; i++) {
          msg = "<p><b>" + results.rows.item(i).log + "</b></p>";
          document.getElementById("max").value = results.rows.item(i).id;
          //document.querySelector('#myInput').innerHTML +=  msg;
        }
      }, null);
    });

    function deletex(a, r) {
      alert('suppression de ' + a);
      var i = r.parentNode.parentNode.rowIndex;
      document.getElementById("myTable").deleteRow(i);

      var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
      var msg;
      db.transaction(function (tx) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log,bureau,date_scan)');
        tx.executeSql('delete from LOGS where id=' + a);
        msg = '<p>Log message created and row inserted.</p>';
        document.querySelector('#status').innerHTML = msg;
      });

    }

    function deletex2(a, r) {
      alert('suppression de ' + a);
      var i = r.parentNode.parentNode.rowIndex;
      document.getElementById("myTable33").deleteRow(i);

      var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
      var msg;
      db.transaction(function (tx) {
        //tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log,bureau,date_scan)');
        tx.executeSql("delete from LOGS where id=" + a + "");
        // msg = '<p>Log message created and row inserted.</p>';
        // document.querySelector('#status').innerHTML =  msg;
      });
      document.getElementById("exe").value = "";

      document.getElementById("eqp").value = "";
    }


    function padd() {
      if (document.getElementById("article").value == "") alert("Merci de saisir le N° Article !!");
      else {
        document.getElementById("article").value

        var article = document.getElementById("article").value;
        var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
        var msg;
        db.transaction(function (tx) {
          tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log,bureau,date_scan)');

        });

        db.transaction(function (tx) {

          tx.executeSql('SELECT * from LOGS where log="' + article + '"', [], function (tx, results) {
            var len = results.rows.length, i;
            document.getElementById("myTable33").innerHTML = "";

            var table = document.getElementById("myTable33");

            for (i = 0; i < len; i++) {
              // msg = "<p><b>" + results.rows.item(i).log + "</b></p>";
              // document.querySelector('#myInput').innerHTML +=  results.rows.item(i).log +"\n";
              //document.querySelector('#myInput').innerHTML +=  msg;




            }
            if (i > 0) alert("article scanné");
            else add();
          }, null);
        });
      }
    }
    function add() {
      var max = document.getElementById("max").value;
      var bureau = document.getElementById("bureau").value;
      var xx = Number(max) + 1;
      document.getElementById("max").value = xx;
      var article = document.getElementById("article").value;
      var table = document.getElementById("myTable");
      var row = table.insertRow(0);
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(1);
      var cell3 = row.insertCell(2);
      var cell4 = row.insertCell(3);
      cell1.innerHTML = article;
      cell2.innerHTML = " 1";
      cell3.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
      cell4.innerHTML = "<a href='#' onclick='deletex(" + xx + ",this);'>⛔</a>";
      ///
      var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
      var msg;
      db.transaction(function (tx) {
        var today = new Date();
        var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate() + ' ' + today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
        date = today.getDate() + '/' + (today.getMonth() + 1) + '/' + today.getFullYear() + ' ' + today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();

        tx.executeSql('INSERT INTO LOGS (id, log,bureau,date_scan) VALUES (' + xx + ', "' + article + '", "' + bureau + '", "' + date + '")');
        msg = '<p>Log message created and row inserted.</p>';
        document.querySelector('#status').innerHTML = msg;
        document.getElementById("article").value = "";
      });



    }
  </script>
  <link rel="stylesheet" href="boots.css">

  <div class="popup popup-social" style="background: white;color:black;">

    <div class="header" id="myHeader"
      style="display: flex; justify-content: space-BETWEEN;padding: 12px; background-color: #5BAC26;">
      <h3 style="color: #fff; font-size: 30px;margin-top: 6px;">Mobilis</h3>

      <a href="#" class="close-popup">
        <img src="icons8-close-50.png" height="36px" style=" padding-top: 8px; " />
      </a>
    </div>


    <div class="content-block">
      <h2 style="  color: #5BAC26;font-size: 20px; DISPLAY: flex;
      justify-content: center; margin-bottom: 20px;"><img src="icons8-barcode-65.png"
          style="width: 55px;" /> <span style="display: flex;align-items: center;"> Scan Article </span></h2>
      <ul class="social_share" style="text-align:center;">
        <div class="form-group" style="display: flex; flex-direction: column; align-items: center;">
          <div class="input-group mb-3" style="margin-top: 10px;">


            <script type="text/javascript">
              function scan() {
                Android.scan();

                // setTimeout(() => { console.log("World!"); }, 2000);
                //  document.getElementById('ICCID').value=Android.scanx() ; 
              }
              function codebarre(x) {
                //alert(x);
                document.getElementById("article").value = x;

              }

            </script>
            <script>
              function refresh() {
                $("#myTable").html("");
              }
            </script>
            <div class="input-group-prepend">

              <span class="input-group-text" style="width: 48px; border-radius: 0.25rem; height: 37.33px;"><img
                  src="icons8-multiple-devices-50.png" width="30px" alt="" srcset=""></span>
            </div>
            <input type="text" class="form-control" placeholder="Article" id="article" name="article"
              style="width: 50%;">
            <button onclick="scan()" class="button" style=" margin-left:2%;">⚡</button>



          </div>
          <div class="input-group mb-3" style="margin-top: 10px;">
            <div class="input-group-prepend">

              <span class="input-group-text" style="width: 48px;"><img src="icons8-office-50.png" width="30px" alt=""
                  srcset=""></span>
            </div>
            <input class="form-control" type="text" placeholder="Bureau" style="width: 50%;" id="bureau" />
          </div>

          <div class="input-group mb-3" style="margin-top: 10px;">
            <div class="input-group-prepend">

              <span class="input-group-text" style="width: 48px;"><img src="icons8-quantity-50.png" width="30px" alt=""
                  srcset=""></span>
            </div>


            <input type="text" id="max" class="form-control" style="width: 50%;" placeholder="Qte" />




          </div>
          <a href="#" value="x" class="swiper_read_more" style="width: 10px;
           height: 0px;
             font-size: 15px;margin-left: 35px;   " onclick="padd();"> <img style="    margin-left: -73px;
                margin-top: -49px;
              " src="icons8-plus-50.png" width="30px"/> </a>

        </div>


        <br /><br />
        <div>



          <div class="container" style="
    margin-top: -57px;
">





            <h3 style=" color: #0c928d;    margin-top: -35px;font-size: 14px;">Articles Scannés

            </h3>
            <p style="text-align: -webkit-right;margin-top: -47px;"> <button onclick="refresh()" class="button" style="    font-size: 24px;
    border: 1px;
    background-color: aliceblue;">
                ♻
              </button>
            </p>
            <table class="table">
              <thead style="    border: 1px solid #dddddd;">
                <tr style="font-size: 10px;">
                  <th>Article</th>
                  <th>Qte</th>
                  <th>Discription</th>
                  <th>Delete</th>
                </tr>
              </thead>
            </table>
            <table class="table" id="myTable" style="margin-top: -18px;">

              <tbody>

              </tbody>
            </table>
          </div>

        </div>
      </ul>
      <div class="close_popup_button" style="    position: relative;    margin-top: 100px;margin-left: 34px;"><a
          href="#" class="close-popup">Close</a></div>
    </div>
  </div>


  <div class="popup popup-social2" style="background: white;color:black;">


    <div class="header" id="myHeader"
      style="display: flex; justify-content: space-BETWEEN;padding: 12px; background-color: #5BAC26;">
        <h3 style="color: #fff; font-size: 30px;margin-top: 6px;">Mobilis</h3>

        <a href="#" class="close-popup">
          <img src="icons8-close-50.png" height="36px" style=" padding-top: 8px; " />
        </a>
      </div>


    <div class="content-block" style="margin-top: 18%;">

      <script>
        function affiche_d(x) {
          var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
          var msg;

          db.transaction(function (tx) {
            tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log,bureau,date_scan)');

          });

          db.transaction(function (tx) {

            tx.executeSql('SELECT log ,id ,count(*) as x FROM LOGS where bureau="' + x + '"  group by log ', [], function (tx, results) {
              var len = results.rows.length, i;
              document.getElementById("myTable33").innerHTML = "";

              var table = document.getElementById("myTable33");

              for (i = 0; i < len; i++) {
                // msg = "<p><b>" + results.rows.item(i).log + "</b></p>";
                // document.querySelector('#myInput').innerHTML +=  results.rows.item(i).log +"\n";
                //document.querySelector('#myInput').innerHTML +=  msg;

                var row = table.insertRow(0);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                //var cell4=row.insertCell(3);
                cell1.innerHTML = results.rows.item(i).log;
                cell2.innerHTML = results.rows.item(i).x;

                cell3.innerHTML = "<a href='#' onclick='deletex2(" + results.rows.item(i).id + ",this);'>⛔</a>";

              }
            }, null);
          });
        }



        function affiche_bureau() {

          var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
          var msg;
          db.transaction(function (tx) {
            tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log,bureau,date_scan)');

          });

          db.transaction(function (tx) {

            tx.executeSql('SELECT bureau,count(*)as x FROM LOGS group by bureau ', [], function (tx, results) {
              var len = results.rows.length, i;
              document.getElementById("myTable2").innerHTML = "";

              var table = document.getElementById("myTable2");

              for (i = 0; i < len; i++) {
                // msg = "<p><b>" + results.rows.item(i).log + "</b></p>";
                // document.querySelector('#myInput').innerHTML +=  results.rows.item(i).log +"\n";
                //document.querySelector('#myInput').innerHTML +=  msg;

                var row = table.insertRow(0);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);

                cell1.innerHTML = results.rows.item(i).bureau;
                cell2.innerHTML = results.rows.item(i).x;
                var p = "" + results.rows.item(i).bureau + ""
                cell3.innerHTML = ' <div class="toolbar"><div class="toolbar-inner"><ul class="toolbar_icons icons_4row"><li><a href="#" data-popup=".popup-social23" class="open-popup" onclick="affiche_d(\'' + p + '\');"><img src="images/icons/white/heart.png" alt="" title="" />⚡</a></li></ul></div></div>';


              }
            }, null);
          });
        }
      </script>
      <div class="container" style="
    margin-top: -57px;
">





        <h2 style=" color: #5BAC26;  font-size: 23px;">




          <img src="icons8-todo-list-50.png" style="width: 35px; margin-bottom: 12px;" />
          Articles Scannés
        </h2>
        <p style="color: black;text-align: left;">Séléctionner une ligne pour voir le détail de Bureau scanné</p>
        <table class="table">
          <thead style="    border: 1px solid #dddddd;">
            <tr style="font-size: 10px;">
              <th>N° Bureau</th>
              <th>Nb Article</th>
              <th>Détail</th>
            </tr>
          </thead>
        </table>
        <table class="table" id="myTable2" style="margin-top: -18px;">

          <tbody>

          </tbody>


        </table>
      </div>


      <div class="close_popup_button" style="    position: relative;    margin-left: 34px;margin-top: 100px;"><a
          href="#" class="close-popup">Close</a></div>
    </div>
  </div>
  <script>

  </script>

  <div class="popup popup-detailx" style="background: white;color:black;">

    <div class="header" id="myHeader" style=" position: sticky;
  top: 0;
  width: 100%;    margin-left: -15px;  text-align: right;"><a href="#" class="close-popup"><img
          src="icons8-close-window-50.png" height="36px" style=" padding-top: 8px; " /></a></div>

    <div class="content-block">
      <div class="container">



        <h2 style="  color: #0c928d;  margin-top: -59px;  font-size: 20px;
"><img src="icons8-ajouter-le-fichier-64.png" style="width: 31px;" />Afféctation </h2>

        <p> </p>

        <script>
          function delete_affectation(x, y, z) {
            alert("delete affectation ");
            var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);


            db.transaction(function (tx) {




              tx.executeSql('delete from affectation2');

            });


          }
          function chkoupi(x, y, z) {

            var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);


            db.transaction(function (tx) {


              tx.executeSql('CREATE TABLE IF NOT EXISTS affectation2 (inv, code,date)');

              tx.executeSql('INSERT INTO affectation2 (inv, code,date) VALUES ("' + x + '","' + y + '","' + z + '")');

            });


          }






          var ix = 0;
          jQuery.get("images/test.txt", function (data) {
            var text = data;

            var resx = [];
            var res = data.split("\n");
            document.getElementById("myInputx").value = "";
            document.getElementById("myTable4").innerHTML = "";

            var table = document.getElementById("myTable4");
            while (ix < res.length - 1) {
              detail = res[ix].split(" ");

              document.getElementById("myInputx").value = res[ix] + "x" + document.getElementById("myInputx").value;
              document.getElementById("myInputx").value = document.getElementById("myInputx").value.replace(/\s+/g, ',');
              var row = table.insertRow(0);
              var cell1 = row.insertCell(0);


              cell1.innerHTML = "<span  > " + detail + "</span>";

              ix++;
            }
            document.getElementById("nb").value = ix;
          });

          function iny() {



            alert("importation file AFFECTATION");
            var i = 0;
            var x = document.getElementById("nb").value;
            var nb = document.getElementById("nb").value;

            var hm;
            var detail;
            var all = document.getElementById("myInputx").value;
            all = Android.get_aff();

            var res = all.split("x");
            while (i < nb) {


              var msg;
              var detail = res[i].split(",");
              hm = detail[0];

              chkoupi(hm, detail[1], detail[2]);

              i++;


            }
            //

          }


        </script>
        <tr>
          <th>Importation des emplacements théorique depuis la base de donnés local </th>
          Veuillez inserer le nombre de ligne a imporer !
        </tr>
        <div style="height: 300px; overflow: auto;margin-top: 15px;">
          <table class="table" id="myTable4">


            <tbody style="width: 100%;">

            </tbody>
          </table>

          <input type="text" id="nb" style="width: 100px;font-size: 11px;" placeholder="Nombre de ligne" />
          <br /> <br />
          <a href='#' onclick="iny();" /><img style="margin-left: 28px;"
            src="icons8-importer-csv-40.png" /><br />Importation</a>
          <p style="margin-top: -59px;">
            <a href='#' onclick="delete_affectation();" />
            <img style="    width: 42px;" src="icons8-delete-bin-144.png" /> <br />
            Delete</a>
          </p>
        </div>
      </div>

      <div style="display: none;">

        <textarea id="myInputx" name="myInputx" style="display: none;"></textarea>
      </div>

      <div style="margin-left: 34px;" class="close_popup_button"><a href="#" class="close-popup"
          style="    position: relative;    margin-top: 100px;">Close</a></div>


    </div>

  </div>





  <div class="popup popup-social23" style="background: white;color:black;">
    <div class="content-block">

      <script>



      </script>

      <div class="container" style="
    margin-top: -17px;
">

        <div class="header" id="myHeader" style=" position: sticky;
  top: 0;
  width: 100%;    margin-left: -15px;  text-align: right;"><a href="#" class="close-popup"><img
              src="icons8-close-window-50.png" height="36px" style=" padding-top: 8px; " /></a></div>

        <h2 style=" color: #0c928d;   font-size: 23px;margin-top: -19px;">
          <image src="icons8-google-web-recherche-100.png" style="width: 31px;" />

          Détail du Bureau
        </h2>
        <p style="color: black;text-align: left;">Voici la liste des Articles Scannés sur le bureau </p>
        <table class="table">
          <thead style="    border: 1px solid #dddddd;">
            <tr style="font-size: 10px;">
              <th>Code Article</th>
              <th>Qte</th>
              <th>Discription</th>
            </tr>
          </thead>
        </table>
        <table class="table" id="myTable33" style="margin-top: -18px;">

          <tbody>
          </tbody>
        </table>
      </div>


      <div class="close_popup_button" style="  margin-left: 34px;  position: relative;    margin-top: 100px;"><a
          href="#" class="close-popup">Close</a></div>


    </div>
  </div>


  <!--cannni***********************************-->
  <div class="popup popup-croise" style="background: white;color:black;">

    
    <div class="header" id="myHeader"
      style="display: flex; justify-content: space-BETWEEN;padding: 12px; background-color: #5BAC26;">
        <h3 style="color: #fff; font-size: 30px;margin-top: 6px;">Mobilis</h3>

        <a href="#" class="close-popup">
          <img src="icons8-close-50.png" height="36px" style=" padding-top: 8px; " />
        </a>
      </div>
    <div class="content-block" style="margin-top: 18%;">

      <script>



      </script>
      <input type="text" id="storage" name="" style="visibility: hidden;" />
      <div class="container" style="
    margin-top: -57px;">


        <h2 style="  color: #5BAC26;  margin-top: -81px;  font-size: 20px;"><img src="icons8-combo-chart-50.png" style="width: 31px;margin-bottom: 17px;" /> Analyse des données</h2>

        <script>
          function checking() {
            var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
            var msg;
            document.getElementById("myTable44").innerHTML = "";
            document.getElementById("myInput44").innerHTML = "";
            var table = document.getElementById("myTable44");
            var affec = [];
            var chk = 0;
            db.transaction(function (tx) {
              tx.executeSql(' select inv from affectation2 ', [], function (tx, resultsx) {
                var lenx = resultsx.rows.length, ix;
                for (ix = 0; ix < lenx; ix++) {

                  // alert(resultsx.rows.item(ix).inv+"/"+ix );
                  document.getElementById("storage").value = document.getElementById("storage").value + "-" + resultsx.rows.item(ix).inv + "-";
                  //affec[ix];
                  //alert(affec[ix]);

                }
                chk = ix;
              }, null);

              tx.executeSql('SELECT e.log, e.bureau  ,"Prénsent  " as ind  FROM LOGS e      ', [], function (tx, results) {
                var len = results.rows.length, i;
                var m = 0;
                for (i = 0; i < len; i++) {
                  // alert(affec[0]+"za");
                  // msg = "<p><b>" + results.rows.item(i).log + "</b></p>";
                  // document.querySelector('#myInput').innerHTML +=  results.rows.item(i).log +"\n";
                  //document.querySelector('#myInput').innerHTML +=  msg;
                  var row = table.insertRow(0);
                  var selec = "";
                  if (results.rows.item(i).log != '') {
                    var cell1 = row.insertCell(0);
                    var cell2 = row.insertCell(1);
                    var cell3 = row.insertCell(2);

                    cell1.innerHTML = results.rows.item(i).log;
                    cell2.innerHTML = results.rows.item(i).bureau;

                    var position = document.getElementById("storage").value.indexOf("-" + results.rows.item(i).log + "-");
                    if (position > -1) selec = "Prénsent";
                    else selec = "Non Prénsent";
                    m = 0;

                    cell3.innerHTML = "<p style='   color:black; text-align: center;'><span style='font-size:10px'>" + selec + "</span></p>";
                    document.querySelector('#myInput44').innerHTML += results.rows.item(i).log + "," + results.rows.item(i).bureau + "," + results.rows.item(i).code + "," + results.rows.item(i).ind + "\n";
                  }
                }
              }, null);
            });
          }

        </script>
        <script>
          function exportt() {
            var copyText = document.getElementById("myInput44");
            copyText.select();
            copyText.setSelectionRange(0, 99999)
            document.execCommand("copy");
            alert("Export Envoyés: ");
          }


        </script>


        <table class="table">
          <thead style="    border: 1px solid #dddddd;">
            <tr style="font-size: 10px;">
              <th>Article</th>

              <th>Localisation Scanné</th>
              <th>Présence en Fichier d' Affectation</th>
            </tr>
          </thead>
        </table>
        <table class="table" id="myTable44" style="margin-top: -18px;">

          <tbody>

          </tbody>
        </table>
      </div>
      <input id="pingo" type="hidden" />


      <script>
        function create_fi() {


          var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);

          db.transaction(function (tx) {
            document.getElementById("pingo").value = "";

            tx.executeSql(' select id from LOGSx ', [], function (tx, resultsx) {
              var lenx = resultsx.rows.length, ix;
              for (ix = 0; ix < lenx; ix++) {

                // alert(resultsx.rows.item(ix).inv+"/"+ix );



                var resxs = resultsx.rows.item(ix).id.split("||");
                var entete = "";
                if (resxs[1]) {
                  document.getElementById('inv').value = resxs[0];
                  document.getElementById('exe').value = resxs[1];

                } document.getElementById('debut').value = resxs[2].split('/').reverse().join('-');
                document.getElementById('fin').value = "" + resxs[3].split('/').reverse().join('-') + "";
                entete = resxs[0] + "||" + resxs[1] + "||" + resxs[2] + "||" + resxs[3] + "||" + "ccccccc";





                document.getElementById("pingo").value = document.getElementById("pingo").value +
                  "" + entete;




                //affec[ix];
                //alert(affec[ix]);

              }
            });

            tx.executeSql(' select bureau,log,date_scan from logs ', [], function (tx, resultsx) {
              var lenx = resultsx.rows.length, ix;
              for (ix = 0; ix < lenx; ix++) {
                var eqpp = 1;
                if (document.getElementById("eqp").value == 'B' || document.getElementById("eqp").value == 'b')
                  eqpp = 2;

                if (document.getElementById("eqp").value == 'C' || document.getElementById("eqp").value == 'c')
                  eqpp = 3;

                // alert(resultsx.rows.item(ix).inv+"/"+ix );
                document.getElementById("pingo").value = document.getElementById("pingo").value +
                  "" + resultsx.rows.item(ix).bureau + "||" + resultsx.rows.item(ix).log + "||" + resultsx.rows.item(ix).date_scan + "||" +
                  "xxxxxxxx";

                //affec[ix];
                //alert(affec[ix]);

              }

            });


          });




        }
        function envoie_java() {

          var pi = document.getElementById("pingo").value;
          var inv = document.getElementById("inv").value;
          var ex = document.getElementById("exe").value;
          var eq = document.getElementById("eqp").value;
          //alert(pi) ;
          Android.saveData(pi, ex, inv, eq);

        }
      </script>
      <textarea id="myInput44" name="myInput44" style="    visibility: hidden;"></textarea>
      <p style="text-align: right;">
        <!--
  <button style="width: 100px;
    background: transparent;
    border: aliceblue;margin-left: 0px;" onclick="exportt();"><img src="icons8-export-csv-40.png" /><br/>export vers le serveur</button>
<button style="width: 100px;
    background: transparent;
    border: aliceblue;margin-left: 0px;" onclick="create_fi();"><img src="icons8-export-csv-40.png" /><br/>export vers le serveur</button>
-->
      </p>

      <div class="close_popup_button" style="    position: relative;      margin-left: 34px;  margin-top: 100px;"><a
          href="#" class="close-popup">Close</a></div>
    </div>
  </div>





  <div class="popup popup-inventaire" style="background: white;color:black;
 
">


    <div class="header" id="myHeader" style=" position: sticky;
  top: 0;
  width: 100%;    margin-left: -15px;  text-align: right;"><a href="#" onclick="oke();" class="close-popup"><img
          src="icons8-close-window-50.png" height="36px" style=" padding-top: 8px; " /></a></div>

    <div class="content-block">
      <div class="container" style="
    margin-top: -17px;
">


        <script>

          function insert_inventaire() {


            var db1 = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
            db1.transaction(function (tx) {

              var pute = document.getElementById("inv").value + "||" + document.getElementById("exe").value + "||" + document.getElementById("debut").value.split('-').reverse().join('/') + "||" + document.getElementById("fin").value.split('-').reverse().join('/') + "||" + document.getElementById("eqp").value + "||" + "xxxxxxxx";


              // tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log,bureau,date_scan)');
              tx.executeSql('update LOGSx set   id="' + pute + '" ');

              //tx.executeSql('update LOGS set   log="dddddd" where id=1)');

            });

            alert(" Inventaire bien modifier  ");

          }
        </script>
        <script>
          function new_inventaire() {


            confirm("Assurez vous que l'export de l'inventaire actuel est bien enregistrer,Veuillez supprimer l'inventaire acctuel ?");
            var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);

            document.getElementById('inv').value = "";
            document.getElementById('exe').value = "";
            document.getElementById('debut').value = "";
            document.getElementById('fin').value = "";

            document.getElementById('eqp').value = "";

            db.transaction(function (tx) {




              tx.executeSql('delete from LOGS');

            });




            db.transaction(function (tx) {




              tx.executeSql('delete from LOGSx');

            });


            db.transaction(function (tx) {




              tx.executeSql('delete from inventaire2');

            });

            // window.location.reload();

            //Android.reloadv();

          }
        </script>

        <h2 style="  color: #0c928d;  margin-top: -59px;  font-size: 23px;
"><img src="icons8-déplacer-les-stock-100.png" style="width: 35px;    font-size: 23px;" />Inventaire </h2>


        <script>
          function oke() {
            Android.reloadv();
          }
        </script>

        <p>

          <label style="color: black;


    " for="inv"> Inventaire </label>


          <input id="inv" class="form-control" /><br />
          <label style="color: black;"> Exercice </label>
          <input id="exe" class="form-control" /><br />

          <label style="color: black;"> Date Début </label>
          <input id="debut" class="form-control" type="date" /><br />
          <label style="color: black;"> Date Fin </label>
          <input id="fin" class="form-control" type="date" /><br />
          </br>

          <label style="color: black;"> Equipe </label>
          <input id="eqp" class="form-control" />

          <br />

          <a href="#" class="swiper_read_more" style="width: 10px;
    height: 0px;
    font-size: 15px;margin-left: 35px;   " onclick="insert_inventaire();"> <img style="    margin-left: -73px;
    margin-top: -49px;
" src="icons8-checked-radio-button-48.png"> </a>

        <p style="    text-align: right;
    margin-top: -69px;    color: black;
">

          <a href="#" onclick="new_inventaire();"> <img src="icons8-ajouter-une-étiquette-64.png"
              width="35px;" /><b>New</b> </a>

        </p>

        </p>

        <script>
          function delete_affectationx(x, y, z) {
            alert("delete inventaire ");
            var db = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);


            db.transaction(function (tx) {




              tx.executeSql('delete from inventaire2');

            });


          }
          function chkoupix(x, y, z, t, p) {

            var db1 = openDatabase('hammoudi1', '1.0', 'Test DB', 10 * 1024 * 1024);
            db1.transaction(function (tx) {

              var pute = '"' + x + '","' + y + '","' + z + '","' + t + '","' + p + '"';

              tx.executeSql('CREATE TABLE IF NOT EXISTS inventaire2 (num, exercice,dated,datef,agent)');
              tx.executeSql('INSERT INTO inventaire2 (num, exercice,dated,datef,agent) VALUES (' + pute + ')');

            });


          }

          var ixx = 0;
          $.get("inventaire.txt", function (data) {
            var text = data;

            var resx = [];
            var ress = data.split("\n");
            document.getElementById("myInputinv").value = "";
            document.getElementById("myTable444").innerHTML = "";

            var table = document.getElementById("myTable444");
            var detailx;


            while (ixx < ress.length - 1) {

              detailx = ress[ixx].split(" ");

              document.getElementById("myInputinv").value = ress[ixx] + "x" + document.getElementById("myInputinv").value;
              document.getElementById("myInputinv").value = document.getElementById("myInputinv").value.replace(/\s+/g, ',');
              var row = table.insertRow(0);
              var cell1 = row.insertCell(0);


              cell1.innerHTML = "<span  > " + detailx + "</span>";

              ixx++;
            }
            document.getElementById("nbmyInputinv").value = ixx;
          });

          function inyx() {
            alert("importation file inventaire");
            var y = 0;
            var x = document.getElementById("nbmyInputinv").value;
            var nbx = parseInt(x);

            var hmx;
            var detailx;
            var allx = document.getElementById("myInputinv").value;

            var resx = allx.split("x");
            while (y < nbx) {


              var msg;
              var detailx = resx[y].split(",");
              hmx = detailx[0];

              chkoupix(hmx, detailx[1], detailx[2], detailx[3], detailx[4]);

              y++;


            }
            //

          }

        </script>
        <style>
          table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
          }

          th {
            text-align: left;
            padding: 8px;
          }

          td {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
          }

          tr:nth-child(even) {
            background-color: #dddddd;
          }
        </style>

        <!-- <table  style="font-size: 10px;" >
  <thead style="    border: 1px solid #dddddd;">
 <tr><th>Inventaire </th>
        <th>Exercice  </th>
          <th>Du </th>
              <th>AU</th>
                  <th> Agent</th>
      </tr>
    </thead>
       <tr><td>2020 </td>
        <td>Exercice 1 </td>
          <td>01-01-2020 </td>
              <td>31-12-2020</td>
                  <td>TEST</td>
      </tr>
      </table>
    -->
        <div style="height: 300px; overflow: auto;margin-top: 15px;">
          <table class="table" id="myTable444">


            <tbody style="width: 100%;">

            </tbody>
          </table>
        </div>
      </div>
      <div style="display: none;">
        <a href='#' onclick="inyx();" />Importation</a>
        <a href='#' onclick="delete_affectationx();" />Delete</a>
        <input type="text" id="nbmyInputinv" />
        <textarea id="myInputinv" name="myInputinv" style="display: none;visibility: hidden;"></textarea>

      </div>
      <div class="close_popup_button" style="margin-left: 10px;"><a href="#" class="close-popup"
          style="    position: relative;  margin-left: 34px;  margin-top: 100px;">Close</a></div>


    </div>

  </div>






  <script type="text/javascript" src="js/jquery-1.10.1.min.js"></script>
  <script src="js/jquery.validate.min.js" type="text/javascript"></script>
  <script type="text/javascript" src="js/framework7.min.js"></script>
  <script type="text/javascript" src="js/my-app.js"></script>
  <script type="text/javascript" src="js/jquery.swipebox.js"></script>
  <script type="text/javascript" src="js/jquery.fitvids.js"></script>
  <script type="text/javascript" src="js/email.js"></script>
</body>

</html>